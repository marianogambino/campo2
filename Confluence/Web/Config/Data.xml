<?xml version="1.0" encoding="utf-8" ?>
<objects  xmlns="http://www.springframework.net"
          xmlns:db="http://www.springframework.net/database">

  <db:provider id="DbProvider"
               provider="System.Data.SQLite"
               connectionString="${test.db.datasource}"/>

  <object id="NHSessionFactory" 
          type="Spring.Data.NHibernate.LocalSessionFactoryObject, Spring.Data.NHibernate12">
    <property name="DbProvider" ref="DbProvider" />
    <property name="MappingAssemblies">
      <list>
        <value>DAL</value>
      </list>
    </property>
    <property name="HibernateProperties">
      <dictionary>
        <entry key="hibernate.connection.provider" value="NHibernate.Connection.DriverConnectionProvider"/>
        <entry key="hibernate.connection.driver_class" value="NHibernate.Driver.SQLite20Driver"/>
        <entry key="hibernate.dialect" value="NHibernate.Dialect.SQLiteDialect"/>
      </dictionary>
    </property>
  </object>

  <object id="Dao" abstract="true">
    <property name="SessionFactory" ref="NHSessionFactory"/>
  </object>
  
  <object name="UserDao" parent="Dao"
          type="Confluence.DAL.UserDao, DAL"/>

</objects>
